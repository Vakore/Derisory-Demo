//areaName = "Plains";
backgrounds = [
  //First BG
  {
    "stars":[],
    "backFuncs":[function() {
        if (background.stars.length == 0) {
            background.sprites = {
                "tent":{x:1,y:1,w:48,h:26},
                "tree":{x:68,y:103,w:66,h:88},
                "moon":{x:50,y:1,w:51,h:51},
            };
            for (var i = 0; i < 100; i++) {
                background.stars.push(round(random(-455, 455)), round(random(-256, 256))); 
            }
        }
        fill(255, 255, 255);
        image("plainsProps", background.sprites.moon, 140, -100);
    },150,function() {
        fill(255, 255, 255);
        for (var i = 0; i < background.stars.length; i += 2) {
            rect(background.stars[i], background.stars[i + 1], 1, 1);
        }
        //rect(-10, -10, 20, 20);
    },50,function() {
        save();
        translate(208, 167);
        scale(-1, 1);
        image("plainsProps", background.sprites.tent, 0, 0);
        restore();
        //image(tree
        stars = [];
    },1],
  },
];

levels = [
[
"1111111111111----------------------------------------------------------------------------------------------111111111111111111111111111",
"11111111111------------------------------------------------------------------------------------------------111111111111111111111111111",
"111--------------------------------------------------------------------------------------------------------111111111111111111111111111",
"-----------------------------------------------------------------------------------------------------------111111111111111111111111111",
"-------1111111111------------------------------------------------------------------------------------------111111111111111111111111111",
"111111111111111--------------------------------------------------------------------------------------------111111111111111111111111111",
"1111111111111----------------------------------------------------------------------------------------------111111111111111111111111111",
"1111111111111----------------------------------------------------------------------------------------------111111111111111111111111111",
"1111111111111----------------------------------------------------------------------------------------------111111111111111111111111111",
"1111111111111----------------------------------------------------------------------------------------------111111111111111111111111111",
"1111111111111----------------------------------------------------------------------------------------------111111111111111111111111111",
"1111111111111----------------------------------------------------------------------------------------------111111111111111111111111111",
"1111111111111`---------------------------------------------------------------------------------------------111111111111111111111111111",
"------------------------------------------------------------------------------------------------------------11111111111111111111111111",
"--------------------------------------------------------------------------------------------------------------111111111111111111111111",
"--------------------------------------------------------------------------------------------------------11------1111111111111111111111",
"111111111----------------------------------------------------------------------------------------------111------1111111111111111111111",
"111111111----------------------------------------------11---------------------------------------------11111-------11111111111111111111",
"111111111---------------------------------------------111---------------------------------------------11111---------111111111111111111",
"111111111------111----------------------------------11111---------------------------------------------11111----------11111111111111111",
"11111111111--11111111-----------------------------1111111---------------------------------------------11111111--------1111111111111111",
"11111111111111111111111-------------------------1111111111111--------------------------------------11111111111-------------11111111111",
"11111111111111111111111-----------------------111111111111111------------------------------------1111111111111111-------------11111111",
"11111111111111111111111-----------------------1111111111111111111--------------------------------1111111111111111------------------111",
"11111111111111111111111----111--------------111111111111111111111-----------------~------------1111111111111111111111111--------------",
"11111111111111111111111----1111111111111111111111111111111111111111111-!!!!------------!!---11111111111111111111111111111-------------",
"11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111",
"11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111",
[{
"attributes":{music:{track:"calm",volume:1,loop:true,smoothTransition:true,transitionSpeed:0.01},blockType:[0,0]},
"background":backgrounds[0],
"`":function(i, j){
    i -= 14;
    enemies.push(
        new cameraLock(i * 16, j * 16, 82 * 16, 256, 0, 16000, j * 16, j * 16 + 260),
        new pressButton(1126, 0, 300, 512, 0,
            function(obj) {
                if (players[0].sitting || obj.showTextGoDown) {
                    obj.showText -= 0.01;
                } else if (players[0].x + players[0].w > obj.x && players[0].x < obj.x + obj.w &&
                           players[0].abilities.sword && !obj.showTextGoDown && !saveData.oneTimers.plains[6] || obj.showText > 0) {
                    obj.showText += 0.01;
                }
                obj.showText = constrain(obj.showText, 0, 1);
                if (players[0].sitting) {
                    obj.showTextGoDown = true;
                }
            }, function(obj) {
                fill(0, 0, 0, obj.showText / 2);
                rect(140 - scrollX, 45 - scrollY, 160, 17);
                fill(255, 255, 255, obj.showText);
                image("gui", {x:1 + 8.5 - 8.5 * obj.showText,y:1 + 8.5 - 8.5 * obj.showText,w:17 * obj.showText,h:17 * obj.showText},
                      186 - scrollX + 8 - 8 * obj.showText, 45 - scrollY + 8 - 8 * obj.showText);
                if (obj.showText >= 1) {
                    image("gui", {x:19, y:9, w:7 * obj.showText,h:6 * obj.showText},
                          191 - scrollX, 45 - scrollY);
                }
                text8("Press   to interact.", 223 - scrollX, 50 - scrollY, 1, "center");
            }
        ),
    );
},
"!":function(i, j){enemies.push(new grass(i * 16, j * 16, 16, 16, ["grass1", "grass2", "grass3", "grass2"], 0.25));}
},
{screen:1,exit:1,x:-3,y:12,w:3,h:5,setX:0.5,setY:14},{screen:2,exit:1,x:134,y:23,w:3,h:5,setX:132.5,setY:24},{screen:1,exit:2,x:-5,y:2,w:5,h:5,setX:0.5,setY:3}]
],[
"111111111111111111111111111111111111111111111111111111111111111111111111111111111111111",
"11111111111111-----11111111111111111111111111111111111111111111111111111111111111111111",
"111111111111---------------!-1111111111111111111111111111111----------------11111111111",
"11111111111---------------------------------11111111111111------------------111111-----",
"11111111111----------111--------------------11111111111---------------------B----------",
"11111111111%--11111111111---------A---------11111111---------------------------------11",
"111--------------111111111111111111111111---1111111-----------------------------1111111",
"111--------------111111111111111111111111---1111111----------------------------11111111",
"111--------------111111111111111111111111---11111------------------11111111111111111111",
"111--------111---111111111111111111111111---11111-----------A---11111111111111111111111",
"111--------------111111111111111111111111^--111-----11111111111111111111111111111111111",
"111---------------11111111111111111111111---------1111111111111111111111111111111111111",
"11111111------------111111111111111111111`-------11111111111111111111111111111111111111",
"11111111------------------------1111111111111111111111111111111111111111111111111111111",
"11111-----------------------------11111111111111111111111111111111111111111111111111111",
"1111--------11---------------------1111111111111111111111111111111111111111111111111111",
"111--------------------------------11111111111111111111111111111111111---------11111111",
"111-------------111----------------1111111111111111111111111111111---------------111111",
"111------------------111111111-----1111111111111111111111111111------------------------",
"111------------------1111111111----111111111111111111111111111-------------------------",
"111------------------11111111111$--11111111111111111111111111--------------------------",
"11111111111111111111111111111111-----------111111111111111111----------------------1111",
"11111111111111111111111111111111--------------&-----111111111----------------------1111",
"11111111111111111111111111111111----------------------#-----------------@----------1111",
"11111111111111111111111111111111111------------------------------------111---------1111",
"11111111111111111111111111111111111--A------1111----------------------11111--------1111",
"111111111111111111111111111111111111111111111111111111111111111111111111111111111111111",
"111111111111111111111111111111111111111111111111111111111111111111111111111111111111111",
[{
"attributes":{music:{track:"",volume:1,loop:true,smoothTransition:true,transitionSpeed:0.0025},blockType:[102,0]},
"`":function(i, j){
    j += 4;
    enemies.push(
        new cameraLock(i * 16, j * 16, 46*16,160, 0,87*16, j * 16,j * 16 + 46*16),
    );
},
"!":function(i, j){enemies.push(new cameraLock(i * 16, j * 16, 61*16,176, 0,87*16, 0,192));},
"@":function(i, j){
    if (!saveData.abilities.sword) {
        enemies.push(
            new swordPickup(i * 16, j * 16),
            new pressButton(i * 16 - 64, j * 16 - 128, 138, 512, 0,
            function(obj) {
                if (obj.showTextGoDown) {
                    obj.showText -= 0.05;
                } else if (players[0].x + players[0].w > obj.x && players[0].x < obj.x + obj.w &&
                           !players[0].abilities.sword && !obj.showTextGoDown || obj.showText > 0) {
                    obj.showText += 0.01;
                }
                obj.showText = constrain(obj.showText, 0, 1);
                if (players[0].abilities.sword) {
                    obj.showTextGoDown = true;
                }
            }, function(obj) {
                fill(0, 0, 0, obj.showText / 2);
                rect(140 - scrollX, 45 - scrollY, 160, 17);
                fill(255, 255, 255, obj.showText);
                image("gui", {x:1 + 8.5 - 8.5 * obj.showText,y:1 + 8.5 - 8.5 * obj.showText,w:17 * obj.showText,h:17 * obj.showText},
                      186 - scrollX + 8 - 8 * obj.showText, 45 - scrollY + 8 - 8 * obj.showText);
                if (obj.showText >= 1) {
                    image("gui", {x:19, y:9, w:7 * obj.showText,h:6 * obj.showText},
                          191 - scrollX, 45 - scrollY);
                }
                text8("Press   to interact.", 223 - scrollX, 50 - scrollY, 1, "center");
            }
        ),
        );
    }
},
"#":function(i, j){
    enemies.push(
        new breakWall(i * 16, j * 16, 16, 48, 1, 0, function(x,y,hp) {
          image("notEnemySprites", notEnemySprites["breakWallRight" + constrain(4 - hp, 1, 3)], x, y);
        },function(x,y) {
            fill(0, 0, 0);
            rect(x, y - 16, 16, 16);
            rect(x, y + 48, 16, 16);
            rect(x - 256,y - 156,256,236);
        }),
        new pressButton(0, 0, 16, 16, 0,
            function(obj) {
                if (players[0].hp == players[0].maxHp && obj.showTextGoDown) {
                    obj.showText -= 0.01;
                } else if (players[0].hp < players[0].maxHp && !obj.showTextGoDown && !saveData.oneTimers.plains[6]) {
                    obj.showText += 0.01;
                }
                obj.showText = constrain(obj.showText, 0, 1);
                if (obj.showText == 1) {
                    obj.showTextGoDown = true;
                }
            }, function(obj) {
                fill(0, 0, 0, obj.showText / 2);
                rect(156 - scrollX, 45 - scrollY, 128, 17);
                fill(255, 255, 255, obj.showText);
                image("gui", {x:35 + 8.5 - 8.5 * obj.showText,y:1 + 8.5 - 8.5 * obj.showText,w:17 * obj.showText,h:17 * obj.showText},
                      202 - scrollX + 8 - 8 * obj.showText, 45 - scrollY + 8 - 8 * obj.showText);
                text8("Press   to heal.", 223 - scrollX, 50 - scrollY, 1, "center");
                fill(0, 0, 0, obj.showText);
                text8("      Y         ", 223 - scrollX, 50 - scrollY, 1, "center");
            }
        ),
    );
},
"&":function(i, j){enemies.push(new breakWall(i * 16, j * 16, 16, 48, 1, 1, function(x,y,hp) {
    image("notEnemySprites", notEnemySprites["breakWallRight" + constrain(4 - hp, 1, 3)], x, y);
    },function(x,y) {
    fill(0, 0, 0);
    rect(x, y - 16, 16, 16);
    rect(x, y + 48, 16, 16);
    rect(x - 256,y - 156,256,236);
}));},
"$":function(i, j){enemies.push(new breakWall(i * 16, j * 16, 48, 16, 0.5, 2, function(x,y,hp) {
    image("notEnemySprites", notEnemySprites["breakWallBottom" + constrain(4 - hp, 1, 3)], x, y);
    image("blockSprites", {x:120,y:35,w:16,h:16}, x+48,y,16,16);
    },function(x,y){
    fill(0, 0, 0);
    rect(x - 496, y - 256, 560, 256);
    rect(x - 496, y, 480, 32);
    rect(x - 16, y, 16, 16);
    }));},
"%":function(i, j){enemies.push(new breakWall(i * 16, j * 16, 48, 16, 0.5, 3, function(x,y,hp) {
    image("blockSprites", {x:120,y:35,w:16,h:16}, x-16,y,16,16);
    image("notEnemySprites", notEnemySprites["breakWallBottom" + constrain(4 - hp, 1, 3)], x, y);
    image("blockSprites", {x:120,y:35,w:16,h:16}, x+48,y,16,16);
    image("blockSprites", {x:120,y:35,w:16,h:16}, x+64,y,16,16);
    image("blockSprites", {x:120,y:35,w:16,h:16}, x+80,y,16,16);
    },function(x,y) {
    fill(0, 0, 0);
    rect(x - 16, y - 80, 128, 80);
    rect(x + 96, y, 16, 16);
    rect(x + 112, y - 80, 480, 176);
    }));},
"^":function(i, j){enemies.push(new breakWall(i * 16, j * 16, 48, 16, -0.5, 4, function(x,y,hp) {
      image("notEnemySprites", notEnemySprites["breakWallTop" + constrain(4 - hp, 1, 3)], x, y);
    },function(x,y) {
      fill(0, 0, 0);
      rect(x-16,y,16,48);
      rect(x+48,y,16,16);
      rect(x,y+16,64,48);
      rect(x+64,0,672,224);}),
    new breakWall(i * 16, (j - 2) * 16, 48, 16, -0.5, 5, function(x,y,hp) {
      image("notEnemySprites", notEnemySprites["breakWallTop" + constrain(4 - hp, 1, 3)], x, y);
    },function(x,y) {
      fill(0, 0, 0);
      rect(x-16,y,16,48);
      rect(x+48,y,16,16);
      rect(x,y+16,64,48);}));},
},
{screen:0,exit:1,x:87,y:18,w:3,h:5,setX:85.5,setY:19},{screen:0,exit:3,x:87,y:2,w:3,h:5,setX:85.5,setY:3}],
],[
"111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111",
"111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111",
"111111111111111111111111111111111111111111111111111111777771111111111111111111111111111111111111",
"1--------------------------------B------------B-------------------------------------------------",
"1-----------------------------------------------------------------------------------------------",
"1-----------------------------------------------------------------------------------------------",
"1-------------------------------------------------------------------111111`---------------111111",
"1------------------------------------------------------------------1111111----------------111111",
"1--------1--------A-----------------------------------------------11111111----------------111111",
"1-----------111111111111111----------------------------A---------1111!------------------------11",
"1--1--------111111111111111111111111----11111111111111111111111111111-------------------------11",
"1-----------11111111111111111111-----------11111111111111111111111111-------------------------11",
"1----------B111111111111111111--------------1111111111111111111111111-------------------------11",
"1-----1-----111111111111111-----------------------1111111111111111111-------------------------11",
"1-----------111111111111111-----------------------1111111111111111111-------------------------11",
"1-----------111111111111111-----------------------1111111111111111111-------------------------11",
"1-----------111111111111111-----------------------1111111111111111111-------------------------11",
"1-------11--111111111111111-----------------------1111111111111111111-------------------------11",
"1-----------111111111111111-----------------------1111111111111111111-------------------------11",
"1-----------111111111111111-----------------------1111111111111111111-------------------------11",
"1------------11111111111111-----------------------1111111111111111111-------------------------11",
"1--11--------11111111111111-----------------------1111111111111111111-------------------------11",
"1--------------------111111-----------------------1111111111111111111-------------------------11",
"1-------------------------------------------------1111111111111111111-------------------------11",
"1-------11----------------------------------------1111111111111111111-------------------------11",
"1-------------------A-----------------------------1111111111111111111-------------------------11",
"144444444444411111111111111-----------------------1111111111111111111-------------------------11",
"111111111111111111111111111-----------------------1111111111111111111-------------------------11",
"111111111111111111111111111---111-----------------1111111111111111111-------------------------11",
"111111111111111111111111111-----------------------1111111111111111111-------------------------11",
"111111111111111111111111111-----------11----------1111111111111111111-------------------------11",
"111111111111111111111111111-----------11----------1111111111111111111-------------------------11",
"111111111111111111111111111-----------B-----------1111111111111111111-------------------------11",
"111111111111111111111111111-----------------------1111111111111111111-------------------------11",
"1111111111111111111111111------------------111----1111111111111111111-------------------------11",
"11111111111111---B-------------------------111----1111111111111111111-------------------------11",
"11111111111---------------------------------------1111111111111111111-------------------------11",
"1111111111----------------------------------------1111111111111111111-------------------------11",
"111111111--------------------------11111----------1111111111111111111-------------------------11",
"111111111-----------------------------------------1111111111111111111-------------------------11",
"111111111-----------------------------------------1111111111111111111-------------------------11",
"--------@---------------------11------------------1111111111111111111-------------------------11",
"------------------------------11------------------1111111111111111111-------------------------11",
"--------------------------------------------------1111111111111111111#------------------------11",
"111111111111111111111111111444444444444444444444441111111111111111111111111111111111111111111111",
"111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111",
[{
"attributes":{music:{track:"",volume:1,loop:true,smoothTransition:true,transitionSpeed:0.01},blockType:[102,0]},
"`":function(i, j) {
    enemies.push(
        new breakPlatform(i * 16, j * 16, 7, 256, 64, 96, 160, function(obj) {
            fill(0, 0, 0);
            rect(-96, 16, 512, 512);
            if (obj.breakTimer == 30) {
                for (var o = 0; o < 18; o++) {
                    image("blockSprites", {x:120,y:1,w:16,h:16}, -16 + o * 16, 0, 16, 16);
                }
            } else {
                image("blockSprites", {x:120,y:1,w:16,h:16}, -16, 0, 16, 16);
                for (var o = 0; o < 16; o += 3) {
                    image("notEnemySprites", notEnemySprites["breakWallTop3"], o * 16, 0);
                }
                image("blockSprites", {x:120,y:1,w:16,h:16}, 256, 0, 16, 16);
                image("blockSprites", {x:120,y:1,w:16,h:16}, 272, 0, 16, 16);
            }
        }),
        //major checkpoints
        new checkPoint(12, 35, 15, 10, 24.5, 42, false),
        new checkPoint(22, 21, 5, 5, 24.5, 24, false),
        new checkPoint(13, 21, 5, 5, 14.5, 24, false),
        new checkPoint(12, 3, 5, 6, 14.5, 7, false),
        new checkPoint(31, 3, 5, 7, 33.5, 8, false),
        new checkPoint(40, 3, 5, 7, 41.5, 8, false),
        new checkPoint(68, 3, 5, 3, 70.5, 4, false),
        //minor checkpoints
        new checkPoint(30, 21, 3, 7, 31, 26, false),
        new checkPoint(43, 27, 3, 7, 44, 32, false),
        new checkPoint(35, 33, 5, 5, 37, 36, false),
    );
},
"!":function(i, j) {enemies.push(new cameraLock(i * 16, j * 16, 32 * 16, 36 * 16, i * 16, i * 16 + 32 * 16));},
"@":function(i, j){enemies.push(new breakWall(i * 16, j * 16, 16, 48, -1, 6, function(x,y,hp) {
    image("notEnemySprites", notEnemySprites["breakWallLeft" + constrain(4 - hp, 1, 3)], x, y);
    },function(x,y) {
    fill(0, 0, 0);
    rect(x, y + 48, 16, 16);
    rect(x, y - 48, 16, 48);
    rect(x + 16, y - 192, 512, 288);
    }));},
"#":function(i, j) {
    enemies.push(new pancakeBeetleBossSpawner(i * 16, j * 16, 400, 48, i * 16 + 200, j * 16 - 350),
                 new cutsceneBreakWall1(i * 16 - 16, j * 16 - 64));
},
},{screen:0,exit:2,x:-5,y:41,w:5,h:5,setX:0.5,setY:42},{area:"infestedMines",screen:0,exit:1,x:96,y:3,w:2,h:5,setX:94.5,setY:4}],
],
];